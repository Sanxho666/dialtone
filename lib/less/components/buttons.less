//
//  DIALTONE
//  COMPONENTS: BUTTONS
//
//  These are button classes for Dialpad's design system Dialtone.
//  For further documentation of these and other classes,
//  visit https://dialpad.design/components/buttons
//
//  TABLE OF CONTENTS
//  • VARIABLES
//  • BASE STYLE
//  • VISUAL STYLES
//  • ALTERNATE STYLES
//  • SIZES
//
//  ============================================================================
//  $   BUTTONS
//  ----------------------------------------------------------------------------
@button-brand-google:           #4285F4;
@button-brand-o365:             #EB3C01;
@button-brand-linkedin:         #006087;


//  ============================================================================
//  $   BASE STYLE
//  ----------------------------------------------------------------------------
.d-btn {
    box-sizing: border-box;

    position: relative;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    padding: @button-padding;

    border: 0.1rem solid transparent;
    border-radius: @border-radius--sm;
    background-color: @button-bgc;

    text-decoration: none;
    text-transform: inherit;
    font-family: inherit;
    font-size: @button-fs;
    line-height: @button-lh;
    color: @button-fc;

    cursor: pointer;
    transition-timing-function: @transition--cubic-inOut;
    transition-duration: 75ms;
    transition-property: background-color, border, box-shadow;

    user-select: none;
    fill: currentColor;

    //  --  STATES
    //  ------------------------------------------------------------------------
    &:hover,
    &:focus,
    &:active {
        color: @button-fc--hover;
        background-color: @button-bgc--hover;
    }

    &:focus {
        outline: none;
        box-shadow: 0 0 0 @spacing4 var(--focus-ring);
    }
    &:active {
        border-color: @button-bc--active;
        background-color: @button-bgc--active;
    }

    //  --  SIZES
    //  ------------------------------------------------------------------------
    &.d-btn--xs {
        padding: (@spacing4 - @spacing1) (@spacing8 - @spacing1); // Subtract border
        font-size: var(--fs14);
        line-height: calc(20/14);
    }
    &.d-btn--sm {
        padding: (@spacing6 - @spacing1) (@spacing8 - @spacing1); // Subtract border
        font-size: var(--fs14);
        line-height: calc(20/14);
    }
    &.d-btn--lg {
        padding: (@spacing12 - @spacing1) (@spacing16 - @spacing1); // Subtract border
        font-size: var(--fs20);
        line-height: calc(24/20);
    }
    &.d-btn--xl {
        padding: (@spacing6 - @spacing1); // Subtract border;
        border-radius: @border-radius--md;
        font-size: var(--fs24);
        line-height: calc(32/24);
    }

    //  --  LOADING
    //  ------------------------------------------------------------------------
    &.d-btn--loading {
        .d-btn-loading();
    }
}


//  ============================================================================
//  $   BUTTON LABEL
//  ----------------------------------------------------------------------------
.d-btn__label {
    display: inline-flex;
    justify-content: center;
    align-items: center;
}

//  $   BUTTON ICON
//  ----------------------------------------------------------------------------
.d-btn__icon {
    display: flex;
    margin: -.4rem .4rem -.4rem -.2rem;
    width: 1em;
    height: 1em;

    &.d-btn__icon--last {
        order: 1;
        margin-left: .4rem;
        margin-right: -.2rem;
    }
}


//  ============================================================================
//  $   VISUAL STYLES
//  ============================================================================
//  $$  OUTLINED BUTTON
//  ----------------------------------------------------------------------------
.d-btn--outlined {
    border-color: @button-bc--outlined;
    background-color: @button-bgc--outlined;
    color: @button-fc--outlined;

    &:hover,
    &:active,
    &:focus {
        border-color: @button-bc--outlined--hover;
    }
    &:active {
        border-color: @button-bc--outlined--active;
    }
}

//  $$  FILLED BUTTON
//  ----------------------------------------------------------------------------
.d-btn--filled {
    color: @button-fc--filled;
    background-color: @button-bgc--filled;
    border-color: @button-bc--filled;

    &:hover,
    &:active,
    &:focus {
        color: @button-fc--filled--hover;
        background-color: @button-bgc--filled--hover;
        border-color: @button-bc--filled--hover;
    }
    &:active {
        border-color: @button-bc--filled--active;
        background-color: @button-bgc--filled--active;
    }
}

//  $$  MUTED BUTTON
//  ----------------------------------------------------------------------------
.d-btn--muted {
    --focus-ring: fade(@slate-lighter, 25%);

    color: @button-fc--muted;
    background-color: @button-bgc--muted;

    &:hover,
    &:active,
    &:focus {
        color: @button-fc--muted--hover;
        background-color: @button-bgc--muted--hover;
    }
    &:active {
        border-color: @button-bc--muted--active;
        background-color: @button-bgc--muted--active;
    }

    &.d-btn--outlined {
        border-color: @button-bc--muted--outlined;

        &:active {
            border-color: @button-bc--muted--outlined--active;
        }
    }
}

//  $$  DANGER BUTTON
//  ----------------------------------------------------------------------------
.d-btn--danger {
    color: @button-fc--danger;
    background-color: @button-bgc--danger;
    border-color: @button-bc--danger;

    &:hover,
    &:active,
    &:focus {
        color: @button-fc--danger--hover;
        background-color: @button-bgc--danger--hover;
    }
    &:focus {
        --focus-ring: fade(@error-color, 25%);
    }
    &:active {
        border-color: @button-bc--filled--active;
        background-color: @button-bgc--filled--active;
    }

    &.d-btn--outlined {
        border-color: @button-bc--danger--outlined;

        &:active {
            border-color: @button-bc--danger--outlined--active;
        }
    }

    &.d-btn--filled {
        color: @button-fc--danger--filled;
        background-color: @button-bgc--danger--filled;
        border-color: @button-bc--danger--filled;

        &:hover,
        &:active,
        &:focus {
            background-color: @button-bgc--danger--filled--hover;
            border-color: @button-bc--danger--filled--hover;
        }
        &:active {
            background-color: @button-bgc--danger--filled--active;
            border-color: @button-bc--danger--filled--active;
        }
    }
}

//  $$  INVERTED BUTTON
//  ----------------------------------------------------------------------------
//  --  Base, clear inverted button
.d-btn--inverted {
    border-color: @button-bc--inverted;
    background-color: @button-bgc--inverted;
    color: @button-fc--inverted;

    &:hover,
    &:active,
    &:focus {
        color: @button-fc--inverted--hover;
        background-color: @button-bgc--inverted--hover;
    }
    &:focus {
        --focus-ring: var(--btn--inverted__bs--focus);
    }
    &:active {
        background-color: @button-bgc--inverted--active;
        border-color: @button-bc--inverted--active;
    }

    //  --  OUTLINED
    &.d-btn--outlined {
        border-color: @button-bc--inverted--outlined;

        &:hover {
            border-color: @button-bc--inverted--outlined--hover;
        }
        &:active {
            border-color: @button-bc--inverted--outlined--active;
        }
    }

    //  --  FILLED
    &.d-btn--filled {
        color: @button-fc--inverted--filled;
        background-color: @button-bgc--inverted--filled;

        &:hover,
        &:active,
        &:focus {
            color: @button-fc--inverted--filled--hover;
            background-color: @button-bgc--inverted--filled--hover;
            border-color: @button-bc--inverted--filled--hover;
        }
        &:focus {
            --focus-ring: var(--btn--inverted--primary__bs--focus);
        }
        &:active {
            color: @button-fc--inverted--filled--active;
            border-color: @button-bc--inverted--filled--active;
        }
    }
}

//  $$  CIRCLE BUTTONS
//  ----------------------------------------------------------------------------
.d-btn--circle {
    padding: @spacing8;
    border-radius: @border-radius--circle;
    transition-duration: 150ms;

    //  Reset icon margins
    .d-btn__icon {
        margin: unset;
    }

    //  If there's a label, hide it
    .d-btn__label {
        display: none;
    }

    //  Adjust padding based on sizes
    &.d-btn--xs {
        padding: (@spacing6 - @spacing1);   //  Minus border
    }
    &.d-btn--sm {
        padding: @spacing6;
    }
    &.d-btn--lg {
        padding: (@spacing12 - @spacing1);   //  Minus border
    }
    &.d-btn--xl {
        padding: (@spacing16 - @spacing1);   //  Minus border;
    }
}

//  $$  PILL BUTTONS
//  ----------------------------------------------------------------------------
.d-btn--pill {
    border-radius: @br-pill;
}


//  $$  DISABLED STATES
//  ----------------------------------------------------------------------------
.d-btn {
    &[disabled],
    &.d-btn--disabled {
        opacity: 0.75;
        cursor: default;
        pointer-events: none;
        border-color: @button-bc--disabled;
        background-color: @button-bgc--disabled;
        color: @button-fc--disabled;
        transition: none;
    }

    &.d-btn--outlined {
        &[disabled],
        &.d-btn--disabled {
            border-color: @button-bc--outlined--disabled;
            background-color: @button-bgc--outlined--disabled;
        }
    }

    &.d-btn--filled {
        &[disabled],
        &.d-btn--disabled {
            border-color: @button-bc--filled--disabled;
            background-color: @button-bgc--filled--disabled;
            color: @button-fc--filled--disabled;
        }
    }

    &.d-btn--inverted {
        //  --  DISABLED
        &[disabled],
        &.d-btn--disabled {
            border-color: @button-bc--inverted--disabled;
            background-color: @button-bgc--inverted--disabled;
        }

        &.d-btn--outlined {
            &[disabled],
            &.d-btn--disabled {
                border-color: @button-bc--inverted--outlined--disabled;
                background-color: @button-bgc--inverted--outlined--disabled;
            }
        }

        &.d-btn--filled {
            &[disabled],
            &.d-btn--disabled {
                border-color: @button-bc--inverted--filled--disabled;
                background-color: @button-bgc--inverted--filled--disabled;
            }
        }
    }
}

//  $$  BRAND BUTTONS
//  ----------------------------------------------------------------------------
//  --  GOOGLE
.d-btn--google {
    .brand-buttons(@button-brand-google);
}

//
//  --  OFFICE 365
.d-btn--o365 {
    .brand-buttons(@button-brand-o365);
}

//
//  --  LINKEDIN
.d-btn--linkedin {
    .brand-buttons(@button-brand-linkedin);
}


//  ============================================================================
//  @   BUTTON LOADER
//      Changes the button
//  ============================================================================
//  @@  BASE STYLE
//  ----------------------------------------------------------------------------
.d-btn-loading() {
    //  Disable clicking while the loader is in place
    pointer-events: none;

    //  Hide anything that was there before
    .d-btn__icon,
    .d-btn__label {
        opacity: 0;
        transition: opacity 50ms @transition--cubic-inOut;
    }

    //  Show the loading animation
    &:before {
        content: "";
        position: absolute;
        top: calc(~"50% - @{spacing8}");
        left: calc(~"50% - @{spacing8}");

        width: @spacing16;
        height: @spacing16;
        .d-border-radius--circle();
        .d-border-width2();
        .d-border--solid();
        border-color: var(--button__border--loading);
        border-left-color: transparent !important;

        animation: d-loading-circle 900ms infinite linear;
    }
}

//  @@  ALTERNATE STYLES
//  ----------------------------------------------------------------------------
.d-btn-loading--white {
    .d-btn-loading();

    &:before {
        border-color: var(--white);
    }
}

.d-btn-loading--dark {
    .d-btn-loading();

    &:before {
        border-color: var(--slate-light);
    }
}

.d-btn-loading--danger {
    .d-btn-loading();

    &:before {
        border-color: @error-color;
    }
}
