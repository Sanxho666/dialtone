//
//  DIALTONE
//  COMPONENTS: BUTTONS
//
//  These are button classes for Dialpad's design system Dialtone.
//  For further documentation of these and other classes,
//  visit https://dialpad.design/components/buttons
//
//  TABLE OF CONTENTS
//  • BASE STYLE
//  • VISUAL STYLES
//  • ALTERNATE STYLES
//  • SIZES
//
//  ============================================================================
//  $   BASE STYLE
//  ----------------------------------------------------------------------------
.d-btn {
    //  Component specific CSS Vars
    //  ------------------------------------------------------------------------
    --button--fc:         var(--primary-color);
    --button--bgc:        transparent;
    --button--bs-color-inner:   transparent;
    --button--bs-color-outer:   transparent;
    --button--bs:         0 0 0 var(--su1) var(--button--bs-color-inner), 0 0 0 calc(var(--su1) + var(--su4)) var(--button--bs-color-outer);
    --button--br:   var(--base--corner-radius);

    box-sizing: border-box;

    position: relative;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    padding: calc(var(--su8) - var(--su1));

    border: 0.1rem solid transparent;
    border-radius: var(--button--br);
    background-color: var(--button--bgc);
    box-shadow: var(--button--bs);

    text-decoration: none;
    text-transform: inherit;
    font-family: inherit;
    font-size: var(--fs16);
    line-height: var(--lh-tight);
    color: var(--button--fc);

    cursor: pointer;
    transition-timing-function: var(--ttf-in-out);
    transition-duration: 75ms;
    transition-property: background-color, border, box-shadow;

    user-select: none;
    fill: currentColor;

    //  --  STATES
    //  ------------------------------------------------------------------------

    &:active,
    &:hover {
        --button--fc: var(--primary-color-hover);
        --button--bgc: var(--blue-100);
    }
    &:focus {
        outline: none;
        --button--bs-color-inner:   var(--white);
        --button--bs-color-outer:   var(--blue-200);
    }
    // &:active {
    //     border-color: hsla(var(--primary-color-h) var(--primary-color-s) var(--primary-color-l) ~" / " 50%);
    //     background-color: hsla(var(--primary-color-h) var(--primary-color-s) var(--primary-color-l) ~" / " 10%);
    // }

    .d-svg {
        .d-svg--size16
    }

    //  --  SIZES
    //  ------------------------------------------------------------------------
    &.d-btn--xs {
        padding: calc(var(--su4) - var(--su1)) calc(var(--su8) - var(--su1)); // Subtract border
        font-size: var(--fs12);
        line-height: 20/12;

        .d-svg {
            // no icon-size 12 exists so setting manually
            width: 1.2rem !important;
            height: 1.2rem !important;
        }
    }
    &.d-btn--sm {
        padding: calc(var(--su6) - var(--su1)) calc(var(--su8) - var(--su1)); // Subtract border
        font-size: var(--fs14);
        line-height: 20/14;

        .d-svg {
            .d-svg--size14
        }
    }
    &.d-btn--lg {
        padding: calc(var(--su12) - var(--su1)) var(--su12); // Subtract border
        --button--br:   var(--br8);
        font-size: var(--fs20);
        line-height: 24/20;

        .d-svg {
            .d-svg--size20
        }
    }
    &.d-btn--xl {
        padding: calc(var(--su12) - var(--su2)) calc(var(--su16) - var(--su1)); // Subtract border;
        --button--br:   var(--br12);
        font-size: var(--fs24);
        line-height: 32/24;

        .d-svg {
            .d-svg--size24
        }
    }

    //  --  LOADING
    //  ------------------------------------------------------------------------
    &.d-btn--loading {
        .d-btn-loading();
    }
}


//  ============================================================================
//  $   BUTTON LABEL
//  ----------------------------------------------------------------------------
.d-btn__label {
    display: inline-flex;
    justify-content: center;
    align-items: center;
}

//  $   BUTTON ICON
//  ----------------------------------------------------------------------------
.d-btn__icon {
    display: flex;
    margin: var(--sun4) var(--su4) var(--sun4) var(--sun2);
    width: 1em;
    height: 1em;

    &.d-btn__icon--last {
        order: 1;
        margin-left: var(--su4);
        margin-right: var(--sun2);
    }

    &.d-btn__icon--dropdown {
        order: 1;
        margin-left: var(--su4);
        margin-right: var(--sun2);
        .d-svg--size14();
    }
}



//  ============================================================================
//  $   VISUAL STYLES
//  ============================================================================
//  $$  OUTLINED BUTTON
//  ----------------------------------------------------------------------------
.d-btn--outlined {
    border: 0.1rem solid;
    // &:active {
    //     border-color: hsl(var(--primary-color-h) var(--primary-color-s) calc(var(--primary-color-l) + 5%));
    // }
}

//  $$  FILLED BUTTON
//  ----------------------------------------------------------------------------
.d-btn--filled {
    --button--fc: var(--white);
    --button--bgc: var(--primary-color);

    &:hover {
        --button--fc: var(--white);
        --button--bgc: var(--primary-color-hover);
    }

    // &:active {
    //     border-color: hsl(var(--primary-color-h) var(--primary-color-s) calc(var(--primary-color-l) + 10%));
    //     background-color: hsl(var(--primary-color-h) calc(var(--primary-color-s) + 15%) var(--primary-color-l));
    // }
}

//  $$  MUTED BUTTON
//  ----------------------------------------------------------------------------
.d-btn--muted {
    --button--fc: var(--black-700);

    &:hover {
        --button--fc: var(--black-700);
        --button--bgc: var(--black-050);
    }

    &:focus {
        --button--bs-color-outer: var(--black-300);
    }
    // &:active {
    //     border-color: hsla(var(--black-700-h) var(--black-700-s) var(--black-700-l) ~" / " 50%);
    //     background-color: hsla(var(--black-700-h) var(--black-700-s) var(--black-700-l) ~" / " 10%);
    // }

    &.d-btn--outlined {
        border-color: var(--black-500);

        // &:active {
        //     border-color: var(--black-700);
        // }
    }
}

//  $$  DANGER BUTTON
//  ----------------------------------------------------------------------------
.d-btn--danger {

    --button--fc: var(--red-400);

    &:hover {
        --button--bgc: var(--red-100);
        --button--fc: var(--red-500);
    }

    &:focus {
        --button--bs-color-outer: var(--red-200);
    }
    // &:active {
    //     border-color: hsla(var(--error-color-h) var(--error-color-s) var(--error-color-l) ~" / " 50%);
    //     background-color: hsla(var(--error-color-h) var(--error-color-s) var(--error-color-l) ~" / " 10%);
    // }

    &.d-btn--outlined {
        border: 0.1rem solid;

        // &:active {
        //     border-color: var(--error-color-hover);
        // }
    }

    &.d-btn--filled {
        --button--fc: var(--white);
        --button--bgc: var(--red-400);

        &:hover {
            --button--bgc: var(--red-500);
        }
        // &:active {
        //     background-color: hsl(var(--error-color-h) calc(var(--error-color-s) + 15%) var(--error-color-l));
        //     border-color: hsl(var(--error-color-h) var(--error-color-s) calc(var(--error-color-l) - 10%));
        // }
    }
}

//  $$  INVERTED BUTTON
//  ----------------------------------------------------------------------------
//  --  Base, clear inverted button
.d-btn--inverted {

    --button--fc: var(--white);
    --button--bgc: transparent;
    box-shadow: none;
    z-index: var(--zi-base1);

    &:hover {
        --button--fc: var(--white);
        --button--bgc: hsla(var(--blue-100-h) var(--blue-100-s) var(--blue-100-l) ~" / " 25%);
    }
    // &:active {
    //     background-color: hsla(var(--primary-color-h) var(--primary-color-s) var(--primary-color-l) ~" / " 25%);
    //     border-color: hsla(var(--white-h) var(--white-s) var(--white-l) ~" / " 50%);
    // }

    //  --  OUTLINED
    &.d-btn--outlined {

        border: 0.1rem solid;
        // &:active {
        //     border-color: var(--white);
        // }
    }

    //  --  FILLED
    &.d-btn--filled {
        --button--fc: var(--blue-600);
        --button--bgc: var(--white);

        &:hover {
            --button--fc: var(--blue-700);
            --button--bgc: var(--black-200);
        }
        // &:active {
        //     color: hsl(var(--primary-color-h) var(--primary-color-s) calc(var(--primary-color-l) - 25%));
        //     border-color: var(--white);
        // }
    }
}

// because the inner border of the box-shadow outline needs to be transparent
// we have to create a pseudo element behind the original element which displays 
// only a border and grow it to the correct size.
.d-btn--inverted:focus-within::before {
    content: '';
    position: absolute;
    z-index: var(--zi-base);
    border-radius: inherit;
    width: calc(100% + var(--su4));
    height: calc(100% + var(--su4));
    box-shadow: 0 0 0 calc(var(--su1) + var(--su2)) var(--blue-200);
}

//  $$  CIRCLE BUTTONS
//  ----------------------------------------------------------------------------
.d-btn--circle {
    
    padding: calc(var(--su8) + var(--su1));
    --button--br:   var(--br-circle);
    transition-duration: 150ms;

    //  Reset icon margins
    .d-btn__icon {
        margin: unset;
    }

    //  If there's a label, hide it
    .d-btn__label {
        display: none;
    }

    //  Adjust padding based on sizes
    &.d-btn--xs {
        padding: var(--su6);
        --button--br:   var(--br-circle);
    }
    &.d-btn--sm {
        padding: var(--su8);
        --button--br:   var(--br-circle);
    }
    &.d-btn--lg {
        padding: calc(var(--su12) + var(--su1));
        --button--br:   var(--br-circle);
    }
    &.d-btn--xl {
        padding: calc(var(--su16) - var(--su2));
        --button--br:   var(--br-circle);
    }
}

//  $$  PILL BUTTONS
//  ----------------------------------------------------------------------------
.d-btn--pill {
    padding-right: var(--su16);
    padding-left: var(--su16);
    border-radius: @br-pill !important;

    //  Adjust padding based on sizes
    &.d-btn--xs {
        padding-right: var(--su8);
        padding-left: var(--su8);
    }
    &.d-btn--sm {
        padding-right: var(--su12);
        padding-left: var(--su12);
    }
    &.d-btn--lg {
        padding-right: var(--su16);
        padding-left: var(--su16);
    }
    &.d-btn--xl {
        padding-right: var(--su24);
        padding-left: var(--su24);
    }
}

//  $$  DISABLED STATES
//  ----------------------------------------------------------------------------
.d-btn {
    &[disabled],
    &.d-btn--disabled {
        color: var(--black-400);
        background-color: var(--black-100);
        cursor: default;
        pointer-events: none;
        border-color: transparent;
        transition: none;
    }
}

//  $$  BRAND BUTTONS
//  ----------------------------------------------------------------------------
.d-btn--brand {
    display: flex;
    background-color: hsl(var(--brand-color-h) var(--brand-color-s) var(--brand-color-l));
    color: var(--white);

    &:hover,
    &:focus,
    &:active {
        background-color: hsl(var(--brand-color-h) calc(var(--brand-color-s) + 2.5%) calc(var(--brand-color-l) - 5%));
        color: hsla(var(--white-h) var(--white-s) var(--white-l) ~" / " 90%);
    }
    &:focus {
        --focus-ring: hsla(var(--brand-color-h) var(--brand-color-s) var(--brand-color-l) ~" / " 90%);
    }
    &:active {
        background-color: hsl(var(--brand-color-h) calc(var(--brand-color-s) + 5%) calc(var(--brand-color-l) - 10%));
    }

    .d-btn__icon {
        margin-left: var(--sun4);
        width: 2em;
        height: 2em;
        border-radius: var(--br2);
        background-color: var(--white);
    }
    .d-btn__label {
        flex: 1 auto;
    }
}

//  --  GOOGLE
.d-btn--google {
    --brand-color-h:    217;
    --brand-color-s:    89%;
    --brand-color-l:    61%;
}
//  --  OFFICE 365
.d-btn--o365 {
    --brand-color-h:    15;
    --brand-color-s:    99%;
    --brand-color-l:    46%;
}
//  --  LINKEDIN
.d-btn--linkedin {
    --brand-color-h:    197;
    --brand-color-s:    100%;
    --brand-color-l:    26%;
}

//  ============================================================================
//  @   BUTTON LOADER
//      Changes the button
//  ============================================================================
//  @@  BASE STYLE
//  ----------------------------------------------------------------------------
.d-btn-loading() {
    //  Disable clicking while the loader is in place
    pointer-events: none;

    //  Hide anything that was there before
    .d-btn__icon,
    .d-btn__label {
        opacity: 0;
        transition: opacity 50ms var(--ttf-in-out);
    }

    //  Show the loading animation
    &:before {
        content: "";
        position: absolute;
        top: calc(50% - var(--su8));
        left: calc(50% - var(--su8));

        width: var(--su16);
        height: var(--su16);
        border-radius: var(--br-circle);
        border: var(--su2) solid currentColor;
        border-left-color: transparent !important;

        animation: d-loading-circle 900ms infinite linear;
    }
}
