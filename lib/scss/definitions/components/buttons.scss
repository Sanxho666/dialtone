//
//  DIALTONE
//  COMPONENTS: BUTTONS
//
//  These are the base border definitions, which are used by classes or can be
//  used within Vue components. For further documentation of these values,
//  please visit https://dialpad.design/definitions/utilities/borders
//
//  TABLE OF CONTENTS
//  • TOKENS
//  • BASE STYLE
//  • VISUAL STYLES
//  • ALTERNATE STYLES
//  • SIZES
//
//  ============================================================================
//  $   TOKENS
//  ----------------------------------------------------------------------------
$button-primary:                $blue;
$button-primary-hover:          darken(saturate($button-primary,5%),5%);
$button-danger:                 $red;
$button-danger-hover:           darken(saturate($button-danger,5%),5%);
$button-invert:                 $white;
$button-invert-hover:           $blue-lighter;
$button-muted:                  $slate-lighter;
$button-muted-hover:            $slate-light;

$button-font-size:              $text-md;
$button-font-color:             $blue-dark;
$button-background-color:       $button-primary;
$button-border-color:           $button-primary;
$button-border-radius:          $br-sm;
$button-border-loading:         $button-border-color;
$button-border-loading-white:   $white;
$button-border-loading-danger:  $button-danger;
$button-line-height:            $lh-xs;

$button-padding:                $sp8 $sp16;

//  Re-used patterns
@mixin disabled-input-style {
    background-color: $ash-dark;
    color: $slate-lightest;
}

@mixin btn-danger-clear-states {
    &:hover {
        background-color: transparentize($button-danger-hover,.95);
    }
    &:focus {
        box-shadow: 0 0 0 $sp4 transparentize($button-danger,.75);
    }
    &:active,
    &.is-selected {
        border-color: transparentize($button-danger,.5);
        background-color: transparentize($button-danger,.9);
        box-shadow: inset 0 0 $sp8 0 transparentize($button-danger,.7);
    }
}

@each $breakpoint, $variant in $rwd-variants {
    @include rwd($breakpoint) {
        //  ====================================================================
        //  $   BASE STYLE
        //      This class applies the core button properties. You must couple
        //      this with a modifying class.
        //  --------------------------------------------------------------------
        %#{$variant}dt-btn {
            position: relative;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin: 0;
            padding: $button-padding;
            min-height: $sp48;

            border: 1px solid transparent;
            border-radius: $button-border-radius;
            background-color: transparentize($button-background-color,1);
            box-shadow: inset 0 0 0 0 transparentize($button-background-color,1);

            color: $button-font-color;
            text-decoration: none;
            text-transform: inherit;
            letter-spacing: normal;
            font-weight: inherit;
            font-size: $button-font-size;
            font-family: inherit;
            line-height: $button-line-height;

            cursor: pointer;
            transition-timing-function: $transition-cubic-inOut;
            transition-duration: 100ms;
            transition-property: background-color, border, box-shadow;

            user-select: none;
            fill: currentColor;

            &:hover {
                background-color: transparentize($button-background-color,.95);
            }
            &:focus {
                outline: none;
                box-shadow: 0 0 0 $sp4 transparentize($button-background-color,.75);
            }
            &:active,
            &.is-selected {
                border-color: transparentize($button-background-color,.5);
                background-color: transparentize($button-background-color,.9);
                box-shadow: inset 0 0 $sp8 0 transparentize($button-background-color,.7);
            }
            &[disabled] {
                @include disabled-input-style;
                opacity: 0.75;
                transition: none;
                pointer-events: none;
            }

            //  Icon button styling
            .dt-btn--icon {
                display: flex;
                margin-top: -(#{$sp4});
                margin-bottom: -(#{$sp4});
                margin-left: -(#{$sp8});    // Offset button left/right padding
                width: $sp24;
                height: $sp24;

                //  If the icon is last, unset the left margin and apply it
                //  to the right side instead.
                &.fo-last {
                    margin-left: unset;
                    margin-right: -(#{$sp8});    // Offset button left/right padding
                }
            }
        }


        //  ====================================================================
        //  $   ALTERNATE STYLES
        //  ====================================================================
        //  $$  LOADING ANIMATION
        //  --------------------------------------------------------------------
        %#{$variant}dt-btn.is-loading {
            //  Disable clicking while the loader is in place
            pointer-events: none;

            //  Hide anything that was there before
            .dt-btn--icon,
            .dt-btn--label {
                opacity: 0;
                transition: opacity 50ms $transition-cubic-inOut;
            }

            //  Show the loading animation
            &:before {
                content: "";
                position: absolute;
                top: calc(50% - #{$sp8});
                left: calc(50% - #{$sp8});

                width: $sp16;
                height: $sp16;
                border-radius: $br-circle;
                border-width: $bw2;
                border-style: solid;
                border-color: $button-border-loading;
                border-left-color: transparent !important;

                animation: dt-loading-circle .9s infinite linear;
            }
        }

        //
        //  $$  CIRCLE BUTTON
        //  --------------------------------------------------------------------
        %#{$variant}dt-btn-circle {
            justify-content: center;
            align-items: center;
            padding: ($sp12 - $sp1);
            border-radius: $br-circle;
            background-color: transparentize($button-muted,1);
            color: $fc-medium;
            transition: all 150ms $transition-cubic-inOut;

            //  Reset all the margins
            .dt-btn--icon {
                margin: unset;
            }

            //  States
            &:hover {
                background-color: transparentize($button-muted-hover,0.925);
                color: $fc-dark;
            }
            &:focus {
                box-shadow: 0 0 0 $sp4 transparentize($button-muted-hover,0.75);
            }
            &:active,
            .is-selected {
                border-color: transparentize($button-muted,0.5);
                background-color: transparentize($button-muted,0.9);
                box-shadow: 0 0 $sp8 0 transparentize($button-muted,0.7);
            }

            &.is-loading:before {
                border-color: $button-muted-hover;
            }

            //  --  OUTLINED
            //  ----------------------------------------------------------------
            &.dt-btn__outlined {
                border-color: $button-muted;
                color: $fc-medium;

                &:hover {
                    border-color: $button-muted-hover;
                    color: $fc-dark;
                }
                &:active,
                .is-selected {
                    border-color: transparentize($button-muted,0.5);
                    background-color: transparentize($button-muted,0.9);
                    box-shadow: 0 0 $sp8 0 transparentize($button-muted,0.7);
                }
            }

            //  --  DANGER
            //  ----------------------------------------------------------------
            &.dt-btn__danger-hover {
                @include btn-danger-clear-states;

                &:hover {
                    color: $button-danger;
                }
                &:focus,
                &:active,
                .is-selected {
                    color: $button-danger-hover;
                }
            }

            //  --  INVERTED
            //  ----------------------------------------------------------------
            &.dt-btn__inverted:hover {
                color: $fc-white;
            }
        }

        //  ====================================================================
        //  $   VISUAL STYLES
        //  --------------------------------------------------------------------
        //  $$  OUTLINED BUTTON
        //  --------------------------------------------------------------------
        %#{$variant}dt-btn__outlined {
            border-color: $button-border-color;
            box-shadow: none;
            color: $button-font-color;

            &:active,
            &.is-selected {
                border-color: darken($button-border-color,5%);
                background-color: transparentize($button-background-color,.85);
                box-shadow: none;
            }
            &[disabled] {
                border-color: transparent;
            }
        }

        //
        //  $$  PRIMARY BUTTON
        //  --------------------------------------------------------------------
        %#{$variant}dt-btn__primary {
            background-color: $button-primary;
            color: $white;

            &:hover {
                background-color: $button-primary-hover;
            }
            &:focus {
                box-shadow: 0 0 0 $sp4 transparentize($button-primary,.75);
            }
            &:active,
            &.is-selected {
                border-color: darken($button-primary-hover,20%);
                background-color: saturate($button-primary,15%);
                box-shadow: inset 0 0 $sp8 0 darken($blue-darker,10%);
            }

            //  Re-color loading animation
            &.is-loading:before {
                border-color: $button-border-loading-white;
            }
        }

        //
        //  $$  DANGER BUTTON
        //  --------------------------------------------------------------------
        %#{$variant}dt-btn__danger {
            background-color: transparentize($button-danger,1);
            color: $button-danger;

            @include btn-danger-clear-states;

            //  Re-color loading animation
            &.is-loading:before {
                border-color: $button-border-loading-danger;
            }


            //  --  OUTLINED BUTTON
            //  ----------------------------------------------------------------
            &%#{$variant}dt-btn__outlined {
                border-color: $button-danger;
                background-color: transparentize($button-danger,1);
                color: $button-danger;

                &:hover {
                    background-color: transparentize($button-danger-hover,.95);
                }
                &:active,
                &.is-selected {
                    border-color: darken($button-danger,5%);
                    background-color: transparentize($button-danger,.85);
                    box-shadow: none;
                }
                &[disabled] {
                    @include disabled-input-style;
                    border-color: transparent;
                }
            }

            //  --  CLEAR BUTTON
            //  ----------------------------------------------------------------
            &%#{$variant}dt-btn__primary {
                background-color: $button-danger;
                color: $fc-white;

                &:hover {
                    background-color: $button-danger-hover;
                }
                &:focus {
                    box-shadow: 0 0 0 $sp4 transparentize($button-danger,.75);
                }
                &:active,
                &.is-selected {
                    border-color: darken($button-danger,20%);
                    background-color: saturate($button-danger,10%);
                    box-shadow: inset 0 0 $sp8 0 darken($button-danger,10%);
                }
                &[disabled] {
                    @include disabled-input-style;
                }

                //  Re-color loading animation
                &.is-loading:before {
                    border-color: $button-border-loading-white;
                }
            }
        }

        //
        //  $$  INVERTED BUTTON
        //  --------------------------------------------------------------------
        %#{$variant}dt-btn__inverted {
            background-color: transparent;
            color: $button-invert;

            &:hover {
                background-color: transparentize($button-invert-hover,.75);
            }
            &:focus {
                box-shadow: 0 0 0 $sp4 transparentize($button-invert-hover,.75);
            }
            &:active,
            &.is-selected {
                border-color: transparent;
                background-color: transparentize($button-invert-hover,.5);
                box-shadow: none;
            }

            //  Re-color loading animation
            &.is-loading:before {
                border-color: $button-border-loading-white;
            }

            &%#{$variant}dt-btn__outlined {
                border-color: transparentize($button-invert,.5);
                background-color: transparentize($button-invert,1);
                color: $button-invert;

                &:hover {
                    background-color: transparentize($button-invert-hover,.85);
                }

                &:active,
                &.is-selected {
                    border-color: transparentize($button-invert-hover,.1);
                    background-color: transparentize($button-invert-hover,.75);
                    box-shadow: none;
                }
            }

            &%#{$variant}dt-btn__primary {
                color: $button-font-color;
                background-color: $white;

                &:hover {
                    background-color: $button-invert-hover;
                }
                &:focus {
                    box-shadow: 0 0 0 $sp4 transparentize(mix($white, $button-background-color, 50%),.5);
                }
                &:active,
                &.is-selected {
                    border-color: darken($button-invert-hover,5%);
                    background-color: transparentize($button-invert-hover,.1);
                    box-shadow: inset 0 0 $sp8 0 transparentize($button-invert-hover,.7);
                }
                &[disabled] {
                    @include disabled-input-style;
                }

                //  Re-color loading animation
                &.is-loading:before {
                    border-color: $button-border-loading;
                }
            }
        }


        //  ====================================================================
        //  $   SIZES
        //  --------------------------------------------------------------------
        %#{$variant}dt-btn__xs {
            padding: $sp8 ($sp12 - $sp2);
            font-size: $text-xs;
        }
        %#{$variant}dt-btn__sm {
            padding: $sp8 $sp12 ($sp8 - $sp1);
            font-size: $text-sm;
        }
        %#{$variant}dt-btn__lg {
            padding: $sp12 $sp24;
            font-size: $text-lg;
        }
        %#{$variant}dt-btn__xl {
            padding: $sp16 $sp32;
            font-size: $headline-sm;
        }
    }
}
