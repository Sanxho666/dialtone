//
//  DIALTONE
//  COMPONENTS: BUTTONS
//
//  These are the base border definitions, which are used by classes or can be
//  used within Vue components. For further documentation of these values,
//  please visit https://dialpad.design/definitions/utilities/borders
//
//  TABLE OF CONTENTS
//  • TOKENS
//  • BASE STYLE
//  • VISUAL STYLES
//  • ALTERNATE STYLES
//  • SIZES
//
//  ============================================================================
//  $   TOKENS
//  ----------------------------------------------------------------------------
$button-primary:                $blue;
$button-primary-hover:          darken(saturate($button-primary,5%),5%);
$button-danger:                 $red;
$button-danger-hover:           darken(saturate($button-danger,5%),5%);
$button-invert:                 $white;
$button-invert-hover:           $blue-lighter;
$button-muted:                  $slate-lighter;
$button-muted-hover:            $slate-light;

$button-font-size:              $text-md;
$button-font-color:             $blue-dark;
$button-background-color:       $button-primary;
$button-border-color:           $button-primary;
$button-border-radius:          0.25em;
$button-border-loading:         $button-border-color;
$button-border-loading-white:   $white;
$button-border-loading-danger:  $button-danger;
$button-line-height:            $lh-xs;

$button-padding:                ($sp12 - $sp1) ($sp16 - $sp1);     // Minus out 1px for the border

$button-brand-google:           #4285F4;
$button-brand-o365:             #EB3C01;
$button-brand-linkedin:         #006087;


//  ============================================================================
//  $   MIXINS
//  ----------------------------------------------------------------------------
@mixin disabled-input-style {
    background-color: $ash-dark;
    color: $slate-lightest;
}

@mixin btn-danger-clear-states {
    color: $button-danger;

    &:hover {
        color: $button-danger-hover;
        background-color: transparentize($button-danger-hover,.95);
    }
    &:focus {
        box-shadow: 0 0 0 $sp4 transparentize($button-danger,.75);
    }
    &:active,
    &.is-selected {
        border-color: transparentize($button-danger,.5);
        background-color: transparentize($button-danger,.9);
        box-shadow: inset 0 0 $sp8 0 transparentize($button-danger,.7);
    }
}

@mixin brand-buttons($color) {
    display: flex;
    color: $fc-white;
    background-color: $color;

    &:hover {
        background-color: darken(saturate($color,2.5%),5%);
    }
    &:focus {
        box-shadow: 0 0 0 $sp4 transparentize($color,0.75);
    }
    &:active,
    .is-selected {
        background-color: darken(saturate($color,5%),10%);
        box-shadow: inset 0 0 $sp8 0 transparentize(darken($color,10%),0.75);
    }

    .dt-btn--icon {
        margin-top: -($sp8);
        margin-right: $sp16;
        margin-bottom: -($sp8);
        margin-left: -($sp12);
    }
    .dt-svg {
        border-radius: $sp2;
    }
    .dt-btn--icon,
    .dt-svg {
        width: ($sp48 - $sp8);
        height: ($sp48 - $sp8);
    }
    .dt-btn--label {
        flex: 1 auto;
    }
}


//  ============================================================================
//  $   DEFINITIONS
//  ----------------------------------------------------------------------------
@each $breakpoint, $variant in $rwd-variants {
    @include rwd($breakpoint) {
        //  ====================================================================
        //  $   BASE STYLE
        //      This class applies the core button properties. You must couple
        //      this with a modifying class.
        //  --------------------------------------------------------------------
        %#{$variant}dt-btn {
            position: relative;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin: 0;
            padding: $button-padding;

            border: 1px solid transparent;
            border-radius: $button-border-radius;
            background-color: transparentize($button-background-color,1);
            box-shadow: inset 0 0 0 0 transparentize($button-background-color,1);

            color: $button-font-color;
            text-decoration: none;
            text-transform: inherit;
            letter-spacing: normal;
            font-weight: inherit;
            font-size: $button-font-size;
            font-family: inherit;
            line-height: $button-line-height;

            cursor: pointer;
            transition-timing-function: $transition-cubic-inOut;
            transition-duration: 100ms;
            transition-property: background-color, border, box-shadow;

            user-select: none;
            fill: currentColor;

            &:hover {
                background-color: transparentize($button-background-color,.95);
            }
            &:focus {
                outline: none;
                box-shadow: 0 0 0 $sp4 transparentize($button-background-color,.75);
            }
            &:active,
            &.is-selected {
                border-color: transparentize($button-background-color,.5);
                background-color: transparentize($button-background-color,.9);
                box-shadow: inset 0 0 $sp8 0 transparentize($button-background-color,.7);
            }
            &[disabled] {
                @include disabled-input-style;
                opacity: 0.75;
                transition: none;
                pointer-events: none;
            }
        }
        //  Button label styling
        %#{$variant}dt-btn--label {
            display: inline-flex;
            justify-content: center;
            align-items: center;
        }

        //  Icon button styling
        %#{$variant}dt-btn--icon {
            display: flex;
            margin-top: -($sp4 + $sp1);
            margin-right: $sp4;
            margin-bottom: -($sp4);
            margin-left: -($sp4);
            width: $sp24;
            height: $sp24;

            //  If the icon is last, unset the left margin and apply it
            //  to the right side instead.
            &.fo-last {
                margin-left: unset;
                margin-right: -(#{$sp8});    // Offset button left/right padding
            }
        }

        //  ====================================================================
        //  $   SIZES
        //  --------------------------------------------------------------------
        %#{$variant}dt-btn__xs {
            padding: $sp6 $sp8 $sp4;
            font-size: $text-xs;

            .dt-btn--icon,
            .dt-svg {
                width: 0.875rem;    // 14px
                height: 0.875rem;   // 14px
            }
            .dt-btn--icon {
                margin-top: -($sp4);
                margin-right: $sp2;
                margin-bottom: -($sp2);
                margin-left: -($sp2);
            }
        }
        %#{$variant}dt-btn__sm {
            padding: $sp8 $sp12;
            font-size: $text-sm;

            //  Icon adjustments
            .dt-btn--icon,
            .dt-svg {
                width: 1.125rem;    // 18px
                height: 1.125rem;   // 18px
            }
        }
        %#{$variant}dt-btn__lg {
            padding: ($sp12 + $sp1) ($sp16 + $sp2);
            font-size: $text-xl;
        }
        %#{$variant}dt-btn__xl {
            padding: ($sp16 - $sp1) ($sp24 - $sp2);
            font-size: $headline-sm;

            //  Icon adjustments
            .dt-btn--icon,
            .dt-svg {
                width: 1.75rem;     // 28px
                height: 1.75rem;    // 28px
            }
        }

        //  ====================================================================
        //  $   ALTERNATE STYLES
        //  ====================================================================
        //  $$  LOADING ANIMATION
        //  --------------------------------------------------------------------
        %#{$variant}dt-btn.is-loading {
            //  Disable clicking while the loader is in place
            pointer-events: none;

            //  Hide anything that was there before
            .dt-btn--icon,
            .dt-btn--label {
                opacity: 0;
                transition: opacity 50ms $transition-cubic-inOut;
            }

            //  Show the loading animation
            &:before {
                content: "";
                position: absolute;
                top: calc(50% - #{$sp8});
                left: calc(50% - #{$sp8});

                width: $sp16;
                height: $sp16;
                border-radius: $br-circle;
                border-width: $bw2;
                border-style: solid;
                border-color: $button-border-loading;
                border-left-color: transparent !important;

                animation: dt-loading-circle .9s infinite linear;
            }
        }

        //  ====================================================================
        //  $$  CIRCLE BUTTON
        //  --------------------------------------------------------------------
        %#{$variant}dt-btn-circle {
            justify-content: center;
            align-items: center;
            padding: ($sp12 - $sp1);
            border-radius: $br-circle;
            background-color: transparentize($button-muted,1);
            color: $fc-medium;
            transition: all 150ms $transition-cubic-inOut;

            //  Reset all the margins
            .dt-btn--icon {
                margin: unset;
            }
            //  If there's a label, hide it
            .dt-btn--label {
                display: none;
            }

            //  States
            &:hover {
                background-color: transparentize($button-muted-hover,0.925);
                color: $fc-dark;
            }
            &:focus {
                box-shadow: 0 0 0 $sp4 transparentize($button-muted-hover,0.75);
            }
            &:active,
            .is-selected {
                border-color: transparentize($button-muted,0.5);
                background-color: transparentize($button-muted,0.9);
                box-shadow: inset 0 0 $sp8 0 transparentize($button-muted,0.7);
            }

            &.is-loading:before {
                border-color: $button-muted-hover;
            }

            //  ================================================================
            //  $$$  VISUAL STYLES
            //  ================================================================
            //  --   OUTLINED
            //  ----------------------------------------------------------------
            &.dt-btn__outlined {
                border-color: $button-muted;
                color: $fc-medium;

                &:hover {
                    border-color: $button-muted-hover;
                    color: $fc-dark;
                }
                &:active,
                .is-selected {
                    border-color: transparentize($button-muted,0.5);
                    background-color: transparentize($button-muted,0.9);
                    box-shadow: inset 0 0 $sp8 0 transparentize($button-muted,0.7);
                }
            }

            //  --  DANGER
            //  ----------------------------------------------------------------
            &.dt-btn__danger-hover {
                @include btn-danger-clear-states;
                color: $fc-medium;

                &:hover {
                    color: $button-danger;
                }
                &:focus,
                &:active,
                .is-selected {
                    color: $button-danger-hover;
                }
            }

            //  --  INVERTED
            //  ----------------------------------------------------------------
            &.dt-btn__inverted {
                 &:hover {
                    background-color: transparentize($white,.9);
                    color: $fc-white;
                }
                &:active,
                &.is-selected {
                    border-color: transparentize($slate,.85);
                    background-color: transparentize($button-invert-hover,.65);
                    box-shadow: inset 0 0 $sp8 0 transparentize($slate,.65);
                }
            }

            //  ================================================================
            //  $$$  SIZES
            //  ================================================================
            //  --   Extra Small
            //  ----------------------------------------------------------------
            &.#{$variant}dt-btn__xs {
                padding: ($sp6 - $sp1);     // Minus out 1px for the border
            }
            &.#{$variant}dt-btn__sm {
                padding: $sp8;
            }
            &.#{$variant}dt-btn__lg {
                padding: ($sp12 + $sp1);
            }
            &.#{$variant}dt-btn__xl {
                padding: ($sp16 - $sp1);    // Minus out 1px for the border
            }
        }

        //  ====================================================================
        //  $   VISUAL STYLES
        //  ====================================================================
        //  $$  OUTLINED BUTTON
        //  --------------------------------------------------------------------
        %#{$variant}dt-btn__outlined {
            border-color: $button-border-color;
            box-shadow: none;
            color: $button-font-color;

            &:active,
            &.is-selected {
                border-color: darken($button-border-color,5%);
                background-color: transparentize($button-background-color,.85);
            }
            &[disabled] {
                border-color: transparent;
            }
        }

        //
        //  $$  PRIMARY BUTTON
        //  --------------------------------------------------------------------
        %#{$variant}dt-btn__primary {
            background-color: $button-primary;
            color: $white;

            &:hover {
                background-color: $button-primary-hover;
            }
            &:focus {
                box-shadow: 0 0 0 $sp4 transparentize($button-primary,.75);
            }
            &:active,
            &.is-selected {
                border-color: darken($button-primary-hover,20%);
                background-color: saturate($button-primary,15%);
                box-shadow: inset 0 0 $sp8 0 darken($blue-darker,10%);
            }

            //  Re-color loading animation
            &.is-loading:before {
                border-color: $button-border-loading-white;
            }
        }

        //
        //  $$  DANGER BUTTON
        //  --------------------------------------------------------------------
        %#{$variant}dt-btn__danger {
            background-color: transparentize($button-danger,1);

            @include btn-danger-clear-states;

            //  Re-color loading animation
            &.is-loading:before {
                border-color: $button-border-loading-danger;
            }

            //  --  OUTLINED BUTTON
            //  ----------------------------------------------------------------
            &%#{$variant}dt-btn__outlined {
                border-color: $button-danger;

                &:active,
                &.is-selected {
                    border-color: darken($button-danger,5%);
                }
                &[disabled] {
                    @include disabled-input-style;
                    border-color: transparent;
                }
            }

            //  --  FILLED BUTTON
            //  ----------------------------------------------------------------
            &%#{$variant}dt-btn__primary {
                background-color: $button-danger;
                color: $fc-white;

                &:hover {
                    background-color: $button-danger-hover;
                }
                &:focus {
                    box-shadow: 0 0 0 $sp4 transparentize($button-danger,.75);
                }
                &:active,
                &.is-selected {
                    border-color: darken($button-danger,20%);
                    background-color: saturate($button-danger,10%);
                    box-shadow: inset 0 0 $sp8 0 darken($button-danger,10%);
                }
                &[disabled] {
                    @include disabled-input-style;
                }

                //  Re-color loading animation
                &.is-loading:before {
                    border-color: $button-border-loading-white;
                }
            }
        }

        //
        //  $$  INVERTED BUTTON
        //  --------------------------------------------------------------------
        %#{$variant}dt-btn__inverted {
            background-color: transparent;
            color: $button-invert;

            &:hover {
                background-color: transparentize($button-invert-hover,.75);
            }
            &:focus {
                box-shadow: 0 0 0 $sp4 transparentize($button-invert-hover,.75);
            }
            &:active,
            &.is-selected {
                border-color: transparent;
                background-color: transparentize($button-invert-hover,.5);
            }

            //  Re-color loading animation
            &.is-loading:before {
                border-color: $button-border-loading-white;
            }

            &%#{$variant}dt-btn__outlined {
                border-color: transparentize($button-invert,.5);
                background-color: transparentize($button-invert,1);
                color: $button-invert;

                &:hover {
                    background-color: transparentize($button-invert-hover,.85);
                }

                &:active,
                &.is-selected {
                    border-color: transparentize($button-invert-hover,.1);
                    background-color: transparentize($button-invert-hover,.75);
                }
                &[disabled] {
                    @include disabled-input-style;
                }
            }

            &%#{$variant}dt-btn__primary {
                color: $button-font-color;
                background-color: $white;

                &:hover {
                    background-color: $button-invert-hover;
                }
                &:focus {
                    box-shadow: 0 0 0 $sp4 transparentize(mix($white, $button-background-color, 50%),.5);
                }
                &:active,
                &.is-selected {
                    border-color: darken($button-invert-hover,5%);
                    background-color: transparentize($button-invert-hover,.1);
                    box-shadow: inset 0 0 $sp8 0 transparentize($button-invert-hover,.7);
                }
                &[disabled] {
                    @include disabled-input-style;
                }

                //  Re-color loading animation
                &.is-loading:before {
                    border-color: $button-border-loading;
                }
            }
        }

        //  ====================================================================
        //  $   BRAND BUTTONS
        //  ====================================================================
        //  $$  GOOGLE LOGIN
        //  --------------------------------------------------------------------
        %#{$variant}dt-btn__google {
            @include brand-buttons($button-brand-google);
        }
        //
        //  $$  OFFICE 365 LOGIN
        //  --------------------------------------------------------------------
        %#{$variant}dt-btn__o365 {
            @include brand-buttons($button-brand-o365);
        }
        //
        //  $$  LINKEDIN LOGIN
        //  --------------------------------------------------------------------
        %#{$variant}dt-btn__linkedin {
            @include brand-buttons($button-brand-linkedin);
        }
    }
}
